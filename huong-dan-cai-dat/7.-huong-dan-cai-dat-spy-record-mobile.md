# 7. Hướng dẫn cài đặt spy/record mobile

**A. Danh sách packages, library yêu cầu**

* NodeJs
* Appium
* Android SDK ( full hoặc platform-tools)

**B. Cài đặt**

1. **Cài đặt NodeJs**

Tải về NodeJs từ trang chủ [NodeJs](https://nodejs.org/)

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXfj1TxQhPRhwK6RH-6DXJq_qQjRc971qmTuCi_iaBJNLIKipqY7FcTXIlzUJVa7x2ow47dl_Ztff7sQjZACHuUHKV6LrydRlEB6pkGvcm7Pungl16h9oH6h8K2E7xUAqZAjZZVnuxu5KcWAjSHaDH5jll7z?key=QjyZTNcrnSmQVDfahTX9Tw" alt=""><figcaption></figcaption></figure>

Chạy file vừa tải về và cài đặt

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXeK9_Fq_BaAAg0hyyMpk5_EttYtOySnR56vLwJpQRl9Hqk38YUMP5Vg6qBsj8XWOAfVxqgugj1btOFgm8MlOG4vq9CqvxMMY6J-BIf51P72F2L791zQtUJmoBQwqbmMPXzT-jIUIaotLw78eDku7Pa3CLgd?key=QjyZTNcrnSmQVDfahTX9Tw" alt=""><figcaption></figcaption></figure>

Mở CMD và chạy câu lệnh node -v để kiểm tra version node

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXdCeXc3YZnByI9JodyciqnjXdWs06Z4DUnf318PR71PdTPFiYAcJ6gjYcLpNXz9T5rqOLRCVeQlCaXzYuAm2WiYTR248tHob8gscELPmB08v5lhD7GdiM6tzLxwyj4OAc0-l36ydRdS_Gu7onlq8dtyap1Y?key=QjyZTNcrnSmQVDfahTX9Tw" alt=""><figcaption></figcaption></figure>

2. **Cài đặt Appium**

Tại CMD chạy câu lệnh npm i -g appium&#x20;

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXcuYu4VXflIhigh7YBDN2p_vZa3jQSR0tWQRIXvNIyyoCrFGWXsFboXzTUWehYDNWNxwaw0GbWqIrjqF60vdBTeJkG38xpBtqAe1Ykvt0nQ7rgTe5M97pNRmmWay3VgsOXcW6HDR22wecZOEGeywrEpptU?key=QjyZTNcrnSmQVDfahTX9Tw" alt=""><figcaption></figcaption></figure>

3. **Cài đặt driver cho appium**

Android: chạy lệnh sau trên CMD: appium driver install uiautomator2&#x20;

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXesSqAwOiDE1iq2iHCM6NJ00aQZxtAXJoaxWeSJgTUv3P4HpECRZ3d8m6yq12jdZic18-Z8amb4OI2CHLBeltgEkzttiL1avZonJyagIr0Tbjl2USY0ZdhjZlzXIGMfyd9-NntD6dJD75hNeznH7YZh7uhr?key=QjyZTNcrnSmQVDfahTX9Tw" alt=""><figcaption></figcaption></figure>

4. **Download Android SDK**

* Truy cập trang [SDK Platforms release](https://developer.android.com/tools/releases/platform-tools)
* Tải phiên bản tương ứng với hệ điều hành
* Giải nén file đã tải
* Di chuyển thư mục platform-tools đến 1 thư mục cố định dễ tìm kiếm vd: D:\Android\SDK

5. **Cấu hình biến môi trường**

* Window

&#x20;           \- Mở windows search bằng tổ hợp phím Windows + S

&#x20;           \- Tìm kiếm: Edit the system environment variables

&#x20;           \- Chọn ứng dụng: Edit the system environment variables

&#x20;           \- Bấm Environment Variables

&#x20;           \- Tại bảng User variables for \*\*\*&#x20;

&#x20;               \+ Bấm New

&#x20;               \+ Điền giá trị ANDROID\_HOME vào ô Variable name

&#x20;               \+ Điền Đường dẫn trỏ đến thư mục chứa platform-tools (vd: D:\Android\SDK) vào ô Variable value

&#x20;            \-  Tại bảng SYSTEM variables (Thực hiện tương tự bên trên)

&#x20;                \+ Bấm New

&#x20;                \+ Điền giá trị ANDROID\_HOME vào ô Variable name

&#x20;                \+ Điền Đường dẫn trỏ đến thư mục chứa platform-tools (vd: D:\Android\SDK) vào ô Variable value

&#x20;                \+ Bấm OK ở cả popup Environment variables và System Properties

* Mac

6. **Thiết lập sdk path trên IDE**

* Bấm vào icon setting trên ide
* Chọn mục Path
* Điền Đường dẫn trỏ đến thư mục chứa platform-tools (vd: D:\Android\SDK) vào field Android home path
* Restart lại IDE

7. **Cấu hình debug trên thiết bị android**

* Truy cập ứng dụng setting
* Tìm điến mục Thông tin điện thoại ( hoặc giới thiệu điện thoại tùy hãng)
* Tìm đến 1 trong số các mục sau Số bản dựng hoặc Phiên bản dựng hoặc Bản build hoặc Phiên bản OS (Tùy vào hãng)
* Nhấn nhanh 10 lần vào mục đó và nhận được thông báo bạn đã là bật thành công chế độ nhà phát triển (hoặc 1 thông báo khác tương tự)
* Trở lại màn hình đầu tiên của app cài đặt.
* Tìm kiếm gỡ lỗi USB hoặc Tùy chọn nhà phát triển
* Tìm đến và bật mục Gỡ lỗi USB

**Lưu ý**: Tùy vào từng hãng sẽ cần làm thêm **1 hoặc cả 2** bước sau:

* Bật mục **Tắt giám sát quyền**
* Tắt mục **Đã bật chế độ nghiêm ngặt**

